<?xml version="1.0"?>
<!--
/**
 * Copyright Â© Magento, Inc. All rights reserved.
 * See COPYING.txt for license details.
 */
-->
<rules xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xsi:noNamespaceSchemaLocation="urn:magento:module:Magento_Paypal:etc/rules.xsd">
    <!-- Website Payments Standard -->
    <payment id="wps_other">
        <events selector="[data-enable='payment']">
            <event value="0" name="deactivate-rule"/>
            <event value="1" name="activate-rule">
                <predicate name="confirm"
                           message="There is already another PayPal solution enabled. Enable this solution instead?"
                           event="deactivate-rule"
                        >
                    <argument name="wpp_ca">wpp_ca</argument>
                    <argument name="paypal_payflowpro_ca">paypal_payflowpro_ca</argument>
                    <argument name="payflow_link_ca">payflow_link_ca</argument>
                    <argument name="express_checkout_other">express_checkout_other</argument>
                </predicate>
            </event>
        </events>
        <relation target="wpp_ca">
            <rule type="disable" event="activate-rule"/>
        </relation>
        <relation target="paypal_payflowpro_ca">
            <rule type="disable" event="activate-rule"/>
        </relation>
        <relation target="payflow_link_ca">
            <rule type="disable" event="activate-rule"/>
        </relation>
        <relation target="express_checkout_other">
            <rule type="disable" event="activate-rule"/>
        </relation>
        <relation target=":self">
            <rule type="simpleMarkEnable" event="activate-rule"/>
            <rule type="simpleDisable" event="deactivate-rule"/>
            <rule type="conflict" event=":load">
                <argument name="wpp_ca">wpp_ca</argument>
                <argument name="paypal_payflowpro_ca">paypal_payflowpro_ca</argument>
                <argument name="payflow_link_ca">payflow_link_ca</argument>
                <argument name="express_checkout_other">express_checkout_other</argument>
            </rule>
        </relation>
    </payment>
    <!-- Website Payments Pro -->
    <payment id="wpp_ca">
        <events selector="[data-enable='payment']">
            <event value="0" name="deactivate-rule"/>
            <event value="1" name="activate-rule">
                <predicate name="confirm"
                           message="There is already another PayPal solution enabled. Enable this solution instead?"
                           event="deactivate-rule"
                        >
                    <argument name="wps_other">wps_other</argument>
                    <argument name="paypal_payflowpro_ca">paypal_payflowpro_ca</argument>
                    <argument name="payflow_link_ca">payflow_link_ca</argument>
                </predicate>
            </event>
        </events>
        <relation target="wps_other">
            <rule type="disable" event="activate-rule"/>
        </relation>
        <relation target="paypal_payflowpro_ca">
            <rule type="disable" event="activate-rule"/>
        </relation>
        <relation target="payflow_link_ca">
            <rule type="disable" event="activate-rule"/>
        </relation>
        <relation target=":self">
            <rule type="simpleMarkEnable" event="activate-rule"/>
            <rule type="simpleDisable" event="deactivate-rule"/>
            <rule type="conflict" event=":load">
                <argument name="wps_other">wps_other</argument>
                <argument name="paypal_payflowpro_ca">paypal_payflowpro_ca</argument>
                <argument name="payflow_link_ca">payflow_link_ca</argument>
            </rule>
        </relation>
    </payment>
    <!-- Payflow Pro -->
    <payment id="paypal_payflowpro_ca">
        <events selector="[data-enable='payment']">
            <event value="0" name="deactivate-rule"/>
            <event value="1" name="activate-rule">
                <predicate name="confirm"
                           message="There is already another PayPal solution enabled. Enable this solution instead?"
                           event="deactivate-rule"
                        >
                    <argument name="wps_other">wps_other</argument>
                    <argument name="wpp_ca">wpp_ca</argument>
                    <argument name="payflow_link_ca">payflow_link_ca</argument>
                </predicate>
            </event>
        </events>
        <relation target="wps_other">
            <rule type="disable" event="activate-rule"/>
        </relation>
        <relation target="wpp_ca">
            <rule type="disable" event="activate-rule"/>
        </relation>
        <relation target="payflow_link_ca">
            <rule type="disable" event="activate-rule"/>
        </relation>
        <relation target=":self">
            <rule type="simpleMarkEnable" event="activate-rule"/>
            <rule type="simpleDisable" event="deactivate-rule"/>
            <rule type="conflict" event=":load">
                <argument name="wps_other">wps_other</argument>
                <argument name="wpp_ca">wpp_ca</argument>
                <argument name="payflow_link_ca">payflow_link_ca</argument>
            </rule>
        </relation>
    </payment>
    <!-- Payflow Link (Includes Express Checkout) -->
    <payment id="payflow_link_ca">
        <events selector="[data-enable='payment']">
            <event value="0" name="deactivate-rule"/>
            <event value="1" name="activate-rule">
                <predicate name="confirm"
                           message="There is already another PayPal solution enabled. Enable this solution instead?"
                           event="deactivate-rule"
                        >
                    <argument name="wps_other">wps_other</argument>
                    <argument name="wpp_ca">wpp_ca</argument>
                    <argument name="paypal_payflowpro_ca">paypal_payflowpro_ca</argument>
                </predicate>
            </event>
        </events>
        <relation target="wps_other">
            <rule type="disable" event="activate-rule"/>
        </relation>
        <relation target="wpp_ca">
            <rule type="disable" event="activate-rule"/>
        </relation>
        <relation target="paypal_payflowpro_ca">
            <rule type="disable" event="activate-rule"/>
        </relation>
        <relation target="express_checkout_other">
            <rule type="simpleMarkEnable" event="activate-rule"/>
            <rule type="paypalExpressDisable" event="activate-rule"/>
            <rule type="paypalExpressLockConfiguration" event="activate-rule"/>
            <rule type="paypalExpressMarkDisable" event="deactivate-rule">
                <argument name="wpp_ca">wpp_ca</argument>
                <argument name="paypal_payflowpro_ca">paypal_payflowpro_ca</argument>
                <argument name="payflow_link_ca">payflow_link_ca</argument>
            </rule>
            <rule type="paypalExpressUnlockConfiguration" event="deactivate-rule">
                <argument name="wpp_ca">wpp_ca</argument>
                <argument name="paypal_payflowpro_ca">paypal_payflowpro_ca</argument>
                <argument name="payflow_link_ca">payflow_link_ca</argument>
            </rule>
        </relation>
        <relation target=":self">
            <rule type="simpleMarkEnable" event="activate-rule"/>
            <rule type="simpleDisable" event="deactivate-rule"/>
            <rule type="payflowExpressEnable" event="activate-rule"/>
            <rule type="payflowExpressDisable" event="deactivate-rule"/>
            <rule type="payflowExpressLockConditional" event=":load"/>
            <rule type="conflict" event=":load">
                <argument name="wps_other">wps_other</argument>
                <argument name="wpp_ca">wpp_ca</argument>
                <argument name="paypal_payflowpro_ca">paypal_payflowpro_ca</argument>
                <argument name="express_checkout_other">express_checkout_other</argument>
            </rule>
        </relation>
    </payment>
    <!-- Express Checkout -->
    <payment id="express_checkout_other">
        <events selector="[data-enable='payment']">
            <event value="0" name="deactivate-rule"/>
            <event value="1" name="activate-rule">
                <predicate name="confirm"
                           message="There is already another PayPal solution enabled. Enable this solution instead?"
                           event="deactivate-rule"
                        >
                    <argument name="wps_other">wps_other</argument>
                </predicate>
            </event>
        </events>
        <events selector="[data-enable='in-context-api']">
            <event value="0" name="deactivate-in-context-api"/>
            <event value="1" name="activate-in-context-api"/>
        </events>
        <relation target="wps_other">
            <rule type="disable" event="activate-rule"/>
        </relation>
        <relation target=":self">
            <rule type="simpleMarkEnable" event="activate-rule"/>
            <rule type="paypalExpressMarkDisable" event="deactivate-rule">
                <argument name="wps_other">wps_other</argument>
                <argument name="payflow_link_ca">payflow_link_ca</argument>
            </rule>
            <rule type="simpleDisable" event="deactivate-rule"/>
            <rule type="inContextEnable" event="activate-rule"/>
            <rule type="inContextDisable" event="deactivate-rule"/>
            <rule type="inContextShowMerchantId" event="activate-rule"/>
            <rule type="inContextHideMerchantId" event="deactivate-rule"/>
            <rule type="inContextActivate" event="activate-in-context-api"/>
            <rule type="inContextDeactivate" event="deactivate-in-context-api"/>
            <rule type="inContextDisableConditional" event=":load"/>
            <rule type="conflict" event=":load">
                <argument name="wps_other">wps_other</argument>
                <argument name="payflow_link_ca">payflow_link_ca</argument>
            </rule>
            <rule type="paypalExpressLockConfigurationConditional" event=":load">
                <argument name="payflow_link_ca">payflow_link_ca</argument>
            </rule>
            <rule type="removeCreditOptionConditional" event=":load"/>
        </relation>
    </payment>
</rules>
