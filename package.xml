<?xml version="1.0"?>
<package packagerversion="1.9.4" version="2.0" xmlns="http://pear.php.net/dtd/package-2.0" xmlns:tasks="http://pear.php.net/dtd/tasks-1.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://pear.php.net/dtd/tasks-1.0 http://pear.php.net/dtd/tasks-1.0.xsd http://pear.php.net/dtd/package-2.0 http://pear.php.net/dtd/package-2.0.xsd">
    <name>datadog_trace</name>
    <channel>pecl.php.net</channel>
    <summary>APM and distributed tracing for PHP</summary>
    <description>The Datadog PHP Tracer brings APM and distributed tracing to PHP.</description>
    <lead>
        <name>Anil Mahtani Mirchandani</name>
        <user>anilm3</user>
        <email>anilm3@php.net</email>
        <active>yes</active>
    </lead>
    <lead>
        <name>Levi Morrison</name>
        <user>levim</user>
        <email>levim@php.net</email>
        <active>yes</active>
    </lead>
    <lead>
        <name>Luca Abbati</name>
        <user>labbati</user>
        <email>luca.abbati@gmail.com</email>
        <active>yes</active>
    </lead>
    <lead>
        <name>Bob Weinand</name>
        <user>bwoebi</user>
        <email>bwoebi@php.net</email>
        <active>yes</active>
    </lead>
    <lead>
        <name>Joe Watkins</name>
        <user>krakjoe</user>
        <email>krakjoe@php.net</email>
        <active>yes</active>
    </lead>
    <lead>
        <name>Pierre Bonet</name>
        <user>pierotibou</user>
        <email>pierotibou@php.net</email>
        <active>yes</active>
    </lead>
    <!-- **Automatically updated with pecl-build script** -->
    <!-- Date only needs to be set if it was packaged on a different day from release -->
    <date>${date}</date>
    <version>
        <!-- **Automatically updated with pecl-build script** -->
        <!-- Version will be set from version.php or 0.0.0 for nightly builds (see 'tooling/bin/pecl-build') -->
        <release>${version}</release>
        <api>${version}</api>
    </version>
    <stability>
        <release>stable</release>
        <api>stable</api>
    </stability>
    <license uri="https://github.com/DataDog/dd-trace-php/blob/master/LICENSE">BSD 3-Clause</license>
    <notes>
        <![CDATA[
### Added
- Add hooking for Closures #1904
- Add hooking for abstract methods #1914
- User tracking through DDTrace\set_user #1910
- Add a DDTrace\generate_distributed_tracing_headers() function #1905
- Add HookData->overrideArguments() method to replace arguments in a pre-hook #1937
- Add Database Monitoring Integration #1941
- Add Custom Instrumentation Documentation #1942, #1963
- Add DD_TRACE_HOOK_LIMIT #1965, #1968

### Changed
- Add IPv6 support to DD_AGENT_HOST #1707
- Add an error.stack to curl_exec() on failure #1934
- Add db.system tag to all relevant integrations #1912
- Slightly reword the exception message to use Caught and Uncaught only at top-level #1954
- Inherit version, env and _dd.origin from parent span #1960

### Fixed
- Fix automatic injection of w3c headers #1917
- Fix observing the attribute constructor on old PHP 8.0 and 8.1 versions #1953
- Use ZEND_TLS/TSRM_TLS macros instead of __thread to only use thread local storage in ZTS builds #1959
- Ensure that internal functions we trace in our integrations are always traced under JIT #1966

### Internal changes
- Build alpine using 3.17 #1922
- Enable shared JSON in PHP 7.4 image #1929
- Cleanup _asan usages in Makefile #1964
- Reduce flakiness from docker containers not starting properly #1962
- Add Zend Framework v1.21 integration test #1944, #1961
- Set coredump_filter to include private file mapped areas in dumps #1935

## Profiling (0.14.0)

### Fixed
- Use checked_sub duration ops for handling cpu time #1926, #1928
- Mask Zend Signals in profiling threads #1927
- Do not block indefinitely in mshutdown #1932, #1967

### Changed
- perf: increased allocation sampling distance to 512KiB #1913
- perf: optimize prepare_sample_message #1952
- Add IPv6 support to DD_AGENT_HOST #1707

### Internal changes
- build: move to Rust v1.64, Alpine 3.17 #1922, #1930
- perf: use numbers instead of numeric strings in pprof labels #1831
- chore: upgrade libdatadog to v2.0.0 #1831
- update Cargo.lock #1907
- refactor: cleanup add/remove interrupts #1906
- refactor: cleanup stalk walking #1908
- refactor: cleanup after Rust 1.64 upgrade #1931
- refactor: extract thread_utils module #1943
- refactor: extract uploader, promote profiling.rs to directory #1946
- refactor: extract stalk walking code #1947
- refactor: extract interrupt manager #1948
]]></notes>
    <contents>
        <dir name="/">
            <!-- code and test files -->${codefiles}
            <file name="config.m4" role="src" />
            <file name="ddtrace.sym" role="src" />

            <!-- Docs -->
            <file name="CHANGELOG.md" role="doc" />
            <file name="LICENSE" role="doc" />
            <file name="LICENSE.Apache" role="doc" />
            <file name="LICENSE.BSD3" role="doc" />
            <file name="NOTICE" role="doc" />
            <file name="README.md" role="doc" />
            <file name="UPGRADE-0.10.md" role="doc" />

            <!-- PHP files -->
            <!-- Include any files from ./bridge that are not referenced in ./bridge/_files.php -->
            <!-- Make sure to update <filelist> below too -->
            <file name="bridge/_generated_api.php" role="php" />
            <file name="bridge/_generated_integrations.php" role="php" />
            <file name="bridge/_generated_tracer.php" role="php" />
            <file name="bridge/_generated_tracer_api.php" role="php" />
            <file name="bridge/autoload.php" role="php" />
            <file name="bridge/dd_init.php" role="php" />
            <file name="bridge/dd_register_optional_deps_autoloader.php" role="php" />
            <file name="bridge/dd_wrap_autoloader.php" role="php" />
        </dir>
    </contents>
    <dependencies>
        <required>
            <php>
                <min>7.0</min>
                <max>8.2.99</max>
            </php>
            <pearinstaller>
                <min>1.4.0</min>
            </pearinstaller>
            <extension>
                <name>json</name>
            </extension>
        </required>
    </dependencies>
    <providesextension>ddtrace</providesextension>
    <extsrcrelease>
        <filelist>
            <install as="datadog_trace/bridge/_generated_api.php" name="bridge/_generated_api.php" />
            <install as="datadog_trace/bridge/_generated_integrations.php" name="bridge/_generated_integrations.php" />
            <install as="datadog_trace/bridge/_generated_tracer.php" name="bridge/_generated_tracer.php" />
            <install as="datadog_trace/bridge/_generated_tracer_api.php" name="bridge/_generated_tracer_api.php" />
            <install as="datadog_trace/bridge/autoload.php" name="bridge/autoload.php" />
            <install as="datadog_trace/bridge/dd_init.php" name="bridge/dd_init.php" />
            <install as="datadog_trace/bridge/dd_register_optional_deps_autoloader.php" name="bridge/dd_register_optional_deps_autoloader.php" />
            <install as="datadog_trace/bridge/dd_wrap_autoloader.php" name="bridge/dd_wrap_autoloader.php" />
        </filelist>
    </extsrcrelease>
</package>
