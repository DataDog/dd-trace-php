<?xml version="1.0"?>
<package packagerversion="1.9.4" version="2.0" xmlns="http://pear.php.net/dtd/package-2.0" xmlns:tasks="http://pear.php.net/dtd/tasks-1.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://pear.php.net/dtd/tasks-1.0 http://pear.php.net/dtd/tasks-1.0.xsd http://pear.php.net/dtd/package-2.0 http://pear.php.net/dtd/package-2.0.xsd">
    <name>datadog_trace</name>
    <channel>pecl.php.net</channel>
    <summary>APM and distributed tracing for PHP</summary>
    <description>The Datadog PHP Tracer brings APM and distributed tracing to PHP.</description>
    <lead>
        <name>Anil Mahtani Mirchandani</name>
        <user>anilm3</user>
        <email>anilm3@php.net</email>
        <active>yes</active>
    </lead>
    <lead>
        <name>Levi Morrison</name>
        <user>levim</user>
        <email>levim@php.net</email>
        <active>yes</active>
    </lead>
    <lead>
        <name>Luca Abbati</name>
        <user>labbati</user>
        <email>luca.abbati@gmail.com</email>
        <active>yes</active>
    </lead>
    <lead>
        <name>Bob Weinand</name>
        <user>bwoebi</user>
        <email>bwoebi@php.net</email>
        <active>yes</active>
    </lead>
    <lead>
        <name>Pierre Bonet</name>
        <user>pierotibou</user>
        <email>pierotibou@php.net</email>
        <active>yes</active>
    </lead>
    <lead>
        <name>Alejandro Estringana Ruiz</name>
        <user>estringanadd</user>
        <email>estringanadd@php.net</email>
        <active>yes</active>
    </lead>
    <lead>
        <name>Florian Engelhardt</name>
        <user>flowcontrol</user>
        <email>flo@dotbox.org</email>
        <active>yes</active>
    </lead>
    <lead>
        <name>Luc Vieillescazes</name>
        <user>iamluc</user>
        <email>luc@vieillescazes.net</email>
        <active>yes</active>
    </lead>
    <!-- **Automatically updated with pecl-build script** -->
    <!-- Date only needs to be set if it was packaged on a different day from release -->
    <date>${date}</date>
    <version>
        <!-- **Automatically updated with pecl-build script** -->
        <!-- Version will be set from version.php or 0.0.0 for nightly builds (see 'tooling/bin/pecl-build') -->
        <release>${version}</release>
        <api>${version}</api>
    </version>
    <stability>
        <release>stable</release>
        <api>stable</api>
    </stability>
    <license uri="https://github.com/DataDog/dd-trace-php/blob/master/LICENSE">BSD 3-Clause</license>
    <notes>
        <![CDATA[
## Tracer

### Added
- PHP 8.4 support #2758
- Support Tag Keys for DD_TRACE_HEADER_TAGS #2922
- Add stubs for the Public PHP API #2933
 - These are available as datadog_tracer.stubs.php release asset
- Collect agent info and apply the env for remote config #2930

### Changed
- Increase read timeout of sidecar for synchronous flushes #2910
- Implement Universal Service Tracking Consistency #2896
- Updating Default Rate Limit Value and Usage Based on Sample Rate #2912

### Fixed
- Fix a possible crash in zai config #2906
- Fix crash when yielding from generators are destroyed #2908
- Fix bad hasThis() check on PHP 7.0 #2911
- Fix RootSpanData writer interception on consecutive calls #2919
- Fix DD_TRACE_OBFUSCATION_QUERY_STRING_REGEXP Empty Value Behavior #2909
- Handle hooks on trampoline fake closures #2925
- Fix crash with locals collection in generator close sequence #2932
- Avoid the hook frame in mysqli connection error tracking #2937
- Support multiple PHP_INI_SCAN_DIR's #2941
- Fix use-after-free in exception replay #2947
- Fully disable the sidecar on lambda by setting all related configs to false #2948
- Fix Symfony Messenger propagation to non-instrumented clients #2956
- Fix JIT crash: There may or may not be a readable ZEND_TRACE_OP_INFO() #2942
- Block remote config signals during ftp functions #2957
- Deduplicate Debugger diagnostics in sidecar Datadog/libdatadog#736
- Handle case where the applictaion is stopped without other telemetry sent Datadog/libdatadog#743

### Internal
- Create many tiny artifacts for faster download #2951
 - Using datadog-setup.php will now download less than 50 MB for a single PHP version
- Add names to memfds Datadog/libdatadog#714
- Allow attaching to the sidecar via gdb Datadog/libdatadog#687

### SSI Loader changes
- Fix compatilibity with PHP 5 #2939
- Fix crash when the loader is loaded multiple times #2954

## Profiling

### Added
- Add fatals and thread start/end events to timeline #2820
- Add thread names #2934
- Add timeline active check for fatals #2945
- Add stream_select()-type functions to timeline #2943
- Visualise opcache restarts in the timeline #2946

## Application Security Management

### Changed
- Disable helper when appsec is fully disabled #2935

### Fixed
- Fix heap corruption after apache reloads (appsec) #2928

### Internal changes
- Update spdlog so it works with recent musls #2921
- Bump libddwaf to 1.20.1 #2913

]]></notes>
    <contents>
        <dir name="/">
            <!-- code, PHP and test files -->${codefiles}
            <file name="config.m4" role="src" />
            <file name="config.w32" role="src" />
            <file name="ddtrace.sym" role="src" />
            <file name="compile_rust.sh" role="src" />
            <file name="VERSION" role="src" />

            <!-- Docs -->
            <file name="CHANGELOG.md" role="doc" />
            <file name="LICENSE" role="doc" />
            <file name="LICENSE.Apache" role="doc" />
            <file name="LICENSE.BSD3" role="doc" />
            <file name="NOTICE" role="doc" />
            <file name="README.md" role="doc" />
        </dir>
    </contents>
    <dependencies>
        <required>
            <php>
                <min>7.0</min>
                <max>8.4.99</max>
            </php>
            <pearinstaller>
                <min>1.4.0</min>
            </pearinstaller>
            <extension>
                <name>json</name>
            </extension>
        </required>
    </dependencies>
    <providesextension>ddtrace</providesextension>
    <extsrcrelease>
        <filelist>
            <!-- Move PHP files to target destination -->${filelist}
        </filelist>
    </extsrcrelease>
</package>
