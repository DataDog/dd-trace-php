version: '3.7'

services:

  base:
    image: datadog/dd-trace-ci:buster
    build:
      context: .

  php-8.0-shared-ext:
    image: datadog/dd-trace-ci:php-8.0-shared-ext
    build:
      context: ./php-8.0
      dockerfile: Dockerfile_shared_ext
      args:
        phpVersion: 8.0
        phpTarGzUrl: https://www.php.net/distributions/php-8.0.13.tar.gz
        phpSha256Hash: b4c2d27c954e1b0d84fd4bfef4d252e154ba479e7db11abd89358f2164ee7cc8

  php-7.4-shared-ext:
    image: datadog/dd-trace-ci:php-7.4-shared-ext
    build:
      context: ./php-7.4
      dockerfile: Dockerfile_shared_ext
      args:
        phpVersion: 7.4
        phpTarGzUrl: https://www.php.net/distributions/php-7.4.26.tar.gz
        phpSha256Hash: 890a7e730f96708a68a77b19fd57fec33cc81573f7249111c870edac42b91a72

  php-master:
    image: datadog/dd-trace-ci:php-master_buster
    build:
      context: ./php-master
